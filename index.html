<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Encryptify - Secret Message</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>

    <!-- Display User IP -->
    <div id="user-ip">Your IP is: Fetching...</div>

    <!-- Floating Reset Fields Button (Always Accessible) -->
    <button id="resetFieldsBtn" onclick="resetFields()">Reset Fields</button>

    <div class="container">
        <h1>🔐 Encryptify - Secert Message</h1>

        <!-- Cipher Key Management (Moved to Top) -->
        <div class="key-box">
            <h2>🗝️ Cipher Key</h2>
            <p id="currentKey">Default Key</p>
            <button onclick="downloadCipherKey()">Download Key</button>

            <label class="custom-file-upload">
                <input type="file" id="uploadKey" onchange="uploadCipherKey()"> Choose Custom Key
            </label>

            <button onclick="resetCipherKey()">Reset Key</button>
        </div>

        <!-- Encrypt Section -->
        <div class="box">
            <h2>Encrypt Message</h2>
            <div class="input-container">
                <textarea id="plainText" placeholder="Enter text..." oninput="realTimeEncrypt()"></textarea>
                <textarea id="cipherText" placeholder="Encrypted text..." readonly></textarea>
            </div>
            <button onclick="pasteText('plainText')">Paste</button>
            <button onclick="copyToClipboard('cipherText')">Copy</button>
            <button onclick="downloadText('cipherText', 'encrypted_text.txt')">Download</button>
        </div>

        <!-- Decrypt Section -->
        <div class="box">
            <h2>Decrypt Message</h2>
            <div class="input-container">
                <textarea id="decryptInput" placeholder="Enter encrypted text..." oninput="realTimeDecrypt()"></textarea>
                <textarea id="decryptedText" placeholder="Decrypted text..." readonly></textarea>
            </div>
            <button onclick="pasteText('decryptInput')">Paste</button>
            <button onclick="copyToClipboard('decryptedText')">Copy</button>
            <button onclick="downloadText('decryptedText', 'decrypted_text.txt')">Download</button>
        </div>
    </div>

    <!-- Page Visit Counter -->
    <div id="visit-counter">Page Visits: <span id="counter">0</span></div>

    <!-- Footer -->
    <footer>
        <p>Project Encrypted by <a href="https://github.com/ARSN72/" target="_blank">Arshan Mansuri</a></p>
        <p><a href="https://github.com/ARSN72/Encryptify" target="_blank">Fork us</a></p>
    </footer>

    <script src="script.js"></script>
</body>
</html>
